"use strict";(self.webpackChunkmerchant_interaction_tracking=self.webpackChunkmerchant_interaction_tracking||[]).push([[128],{128:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});var a=r(558);const n=new class{convertStoreIdToCustomerCode(t){return t?t.startsWith("S")?"A"+t.substring(1):t:""}getAuthHeaders(){const t=localStorage.getItem("auth_token"),e={"Content-Type":"application/json"};return t&&(e.Authorization="Bearer ".concat(t)),e}async getTransactionByStoreCode(t){if(!t)throw new Error("Store ID is required");const e=localStorage.getItem("auth_token");if(!("true"==={NODE_ENV:"production",PUBLIC_URL:"/merchants-interaction-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BYPASS_AUTH)&&!e)throw new Error("Please log in to access data.");try{const e=a.P.API_BASE_URL,r=await fetch("".concat(e,"/api/ims/transactions/").concat(t),{method:"GET",headers:this.getAuthHeaders()});if(!r.ok){const t=await r.text();throw console.error("Response error:",t),new Error("HTTP error! status: ".concat(r.status))}return await r.json()}catch(r){throw console.error("Error fetching transaction:",r),r}}parseCreateAtStr(t){if(!t)return null;try{const e=new Date(t);if(isNaN(e.getTime()))return null;const r=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(n)}catch(e){return console.error("Error parsing date:",e),null}}isDateNewer(t,e){if(!t||!e)return console.log("  \u26a0\ufe0f  Date comparison failed: date1=".concat(t,", date2=").concat(e)),!1;const r=new Date(t),a=new Date(e);if(isNaN(r.getTime()))return console.error("  \u274c Invalid date1 format: ".concat(t)),!1;if(isNaN(a.getTime()))return console.error("  \u274c Invalid date2 format: ".concat(e)),!1;const n=r.getTime()>a.getTime();return console.log("  \ud83d\udcca Date comparison: ".concat(t," (").concat(r.getTime(),") > ").concat(e," (").concat(a.getTime(),") = ").concat(n)),n}getLatestTransactionDate(t){if(!t||!t.data||0===t.data.length)return null;const e=t.data[0];return this.parseCreateAtStr(e.CreateAtStr)}}}}]);
//# sourceMappingURL=128.3d522d97.chunk.js.map